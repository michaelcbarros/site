<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Books — Michael C. Barros</title>
  <meta name="description" content="Books and forthcoming work on religion, myth, and popular culture by Michael C. Barros." />
  <link rel="stylesheet" href="./style.css" />
  <style>
    .book-hero {
      display: grid;
      gap: 2rem;
    }
    @media (min-width: 980px) {
      .book-hero {
        grid-template-columns: minmax(0, 320px) minmax(0, 1fr);
      }
    }
    .status-pill {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      padding: 0.3rem 0.85rem;
      border-radius: 999px;
      border: 1px solid rgba(192, 132, 252, 0.4);
      background: rgba(192, 132, 252, 0.18);
      color: #f5f2ff;
      font-size: 0.75rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
    }
    .blurb {
      border: 1px solid rgba(186, 210, 255, 0.28);
      border-radius: var(--radius-md);
      padding: 1.2rem;
      background: rgba(8, 10, 30, 0.65);
      box-shadow: var(--shadow-card);
    }
    .blurb blockquote {
      margin: 0 0 0.6rem;
      font-size: 1.05rem;
      color: var(--ink);
    }
  </style>
  <script defer src="./js/data/data.js"></script>
</head>
<body class="page page--books">
  <div class="shell">
    <header class="site-header" aria-label="Site">
      <a class="brand" href="./index.html">Michael C. Barros</a>
      <nav class="nav" aria-label="Primary">
        <a class="nav__link" href="./about.html">About</a>
        <a class="nav__link" href="./books.html" aria-current="page">Books</a>
        <a class="nav__link" id="nav-blog" href="https://mythonoesis.substack.com/" target="_blank" rel="noopener">Blog</a>
        <a class="nav__link" href="./projects.html">Projects</a>
        <a class="nav__link" id="nav-research" href="#" target="_blank" rel="noopener">Research</a>
        <a class="nav__link" href="./contact.html">Contact</a>
      </nav>
    </header>

    <main>
      <section class="page-header">
        <span class="eyebrow">Books</span>
        <h1 class="page-title">Theology, myth, and the popular imagination</h1>
        <p class="page-kicker">Published and forthcoming work exploring how sacred imagination moves through games, film, and speculative fiction.</p>
      </section>

      <section aria-labelledby="featured-heading">
        <div class="section-heading">
          <h2 id="featured-heading">Featured</h2>
        </div>
        <article class="section-card">
          <div class="book-hero" id="book-hero">
            <img class="book-cover" src="data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20viewBox%3D%270%200%20400%20600%27%3E%3Cdefs%3E%3ClinearGradient%20id%3D%27g%27%20x1%3D%270%27%20y1%3D%270%27%20x2%3D%271%27%20y2%3D%271%27%3E%3Cstop%20offset%3D%270%25%27%20stop-color%3D%27%23c084fc%27/%3E%3Cstop%20offset%3D%27100%25%27%20stop-color%3D%27%2338bdf8%27/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect%20width%3D%27400%27%20height%3D%27600%27%20fill%3D%27%23080b1f%27/%3E%3Crect%20x%3D%2736%27%20y%3D%2740%27%20width%3D%27328%27%20height%3D%27520%27%20rx%3D%2736%27%20fill%3D%27url%28%23g%29%27%20opacity%3D%270.88%27/%3E%3Ctext%20x%3D%2750%25%27%20y%3D%2752%25%27%20text-anchor%3D%27middle%27%20dominant-baseline%3D%27middle%27%20font-family%3D%27Playfair%20Display%2C%20serif%27%20font-size%3D%2748%27%20fill%3D%27%23f5f6ff%27%20letter-spacing%3D%274%27%3EMyth%3C/text%3E%3C/svg%3E" alt="Book cover" loading="lazy" />
            <div class="book-copy">
              <h3>Current Book</h3>
              <p class="muted">Add book details in <code>js/data/data.js</code>.</p>
              <div class="cta-row">
                <a class="btn" href="#" id="buy-link" target="_blank" rel="noopener">Buy</a>
              </div>
            </div>
          </div>
          <div id="book-extras" class="detail-grid" style="margin-top: 2rem; display: none;">
            <div class="book-copy" id="book-desc"></div>
            <div class="detail-grid" id="book-blurbs"></div>
          </div>
        </article>
      </section>

      <section id="more-books" style="display: none; margin-top: 3rem;">
        <div class="section-heading">
          <h2>More titles</h2>
        </div>
        <div class="grid cols-3" id="books-grid"></div>
      </section>
    </main>

    <footer>© <span id="year"></span> Michael C. Barros</footer>
  </div>

  <script>
    window.addEventListener('DOMContentLoaded', () => {
      const year = document.getElementById('year');
      if (year) year.textContent = new Date().getFullYear();

      const books = (window.SITE_DATA && window.SITE_DATA.books) || [];
      if (!books.length) return;

      const featured = books.find(b => b.featured) || books[0];
      const hero = document.getElementById('book-hero');
      if (!hero) return;
      const FALLBACK_COVER =
        'data:image/svg+xml;charset=UTF-8,' +
        encodeURIComponent(`
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 600">
            <defs>
              <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="#c084fc" />
                <stop offset="100%" stop-color="#38bdf8" />
              </linearGradient>
            </defs>
            <rect width="400" height="600" fill="#080b1f" />
            <rect x="36" y="40" width="328" height="520" rx="36" fill="url(#g)" opacity="0.88" />
            <text x="50%" y="52%" text-anchor="middle" dominant-baseline="middle" font-family="Playfair Display, serif" font-size="48" fill="#f5f6ff" letter-spacing="4">Myth</text>
          </svg>
        `);
      const cover = featured.cover || featured.image || FALLBACK_COVER;
      const status = featured.status ? `<span class="status-pill">${featured.status}</span>` : '';
      const buy = (featured.buy_links && featured.buy_links[0]) ? featured.buy_links[0] : null;

      hero.innerHTML = `
        <img class="book-cover" src="${cover}" alt="${featured.title} cover" loading="lazy" />
        <div class="book-copy">
          <div>${status}</div>
          <h3>${featured.title}</h3>
          ${featured.summary ? `<p class="muted">${featured.summary}</p>` : ''}
          <div class="cta-row">
            ${buy ? `<a class="btn" href="${buy.url}" target="_blank" rel="noopener">${buy.label || 'Buy'}</a>` : ''}
            <a class="btn ghost" href="${featured.url || './books.html'}">Details</a>
          </div>
        </div>
      `;

      const extras = document.getElementById('book-extras');
      const descEl = document.getElementById('book-desc');
      const blurbsEl = document.getElementById('book-blurbs');

      const paragraphs = (featured.description || '')
        .split(/\n{2,}/)
        .map(s => s.trim())
        .filter(Boolean);

      if (paragraphs.length && descEl) {
        descEl.innerHTML = paragraphs.map(p => `<p>${p}</p>`).join('');
      }

      const reviews = featured.reviews || [];
      if (reviews.length && blurbsEl) {
        blurbsEl.innerHTML = reviews.slice(0, 2).map(r => `
          <div class="blurb">
            <blockquote>“${(r.quote || '').replace(/^"|”$/g, '')}”</blockquote>
            <small class="muted">— ${r.source || 'Reviewer'}</small>
          </div>
        `).join('');
      }

      if ((paragraphs.length || reviews.length) && extras) {
        extras.style.display = 'grid';
      }

      const others = books.filter(b => b !== featured);
      if (others.length) {
        const wrap = document.getElementById('more-books');
        const grid = document.getElementById('books-grid');
        if (wrap && grid) {
          grid.innerHTML = others.map(b => `
            <article class="card">
              <div class="feature-copy">
                ${b.cover ? `<img src="${b.cover}" alt="" style="width: 100%; max-width: 140px; border-radius: var(--radius-sm); box-shadow: 0 16px 32px rgba(8, 10, 32, 0.55);">` : ''}
                <div>
                  <div class="meta-row">
                    <span class="status-pill">${b.status || 'Book'}</span>
                  </div>
                  <h3>${b.title}</h3>
                  ${b.summary ? `<p>${b.summary}</p>` : ''}
                  ${(b.buy_links && b.buy_links[0]) ? `<a class="btn ghost" style="margin-top: 0.6rem;" href="${b.buy_links[0].url}" target="_blank" rel="noopener">${b.buy_links[0].label || 'Buy'}</a>` : ''}
                </div>
              </div>
            </article>
          `).join('');
          wrap.style.display = 'block';
        }
      }
    });
  </script>
  <script defer src="./js/nav.js"></script>
</body>
</html>
