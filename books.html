<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Books — Michael C. Barros</title>
  <meta name="description" content="Books and forthcoming work on religion, myth, and popular culture by Michael C. Barros." />
  <link rel="stylesheet" href="./style.css" />
  <style>
    .book-hero {
      display: grid;
      gap: 2rem;
    }
    @media (min-width: 980px) {
      .book-hero {
        grid-template-columns: minmax(0, 320px) minmax(0, 1fr);
      }
    }
    .status-pill {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.3rem 0.75rem;
      border-radius: var(--radius-sm);
      border: 1px solid var(--border);
      background: transparent;
      color: var(--subtle);
      font-size: 0.72rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
    }
    .blurb {
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 1.2rem;
      background: var(--surface);
      box-shadow: var(--shadow-card);
    }
    .blurb blockquote {
      margin: 0 0 0.6rem;
      font-size: 1.05rem;
      color: var(--ink);
    }
  </style>
  <script defer src="./js/data/data.js"></script>
</head>
<body class="page page--books">
  <div class="shell">
    <header class="site-header" aria-label="Site">
      <a class="brand" href="./index.html">Michael C. Barros</a>
      <nav class="nav" aria-label="Primary">
        <a class="nav__link" href="./about.html">About</a>
        <a class="nav__link" href="./books.html" aria-current="page">Books</a>
        <a class="nav__link" id="nav-blog" href="https://mythonoesis.substack.com/" target="_blank" rel="noopener">Blog</a>
        <a class="nav__link" href="./projects.html">Projects</a>
        <a class="nav__link" id="nav-research" href="#" target="_blank" rel="noopener">Research</a>
        <a class="nav__link" href="./contact.html">Contact</a>
      </nav>
    </header>

    <main>
      <section class="page-header">
        <span class="eyebrow">Books</span>
        <h1 class="page-title">Scholarly publications &amp; forthcoming work</h1>
        <p class="page-kicker">Editorial and authorial projects tracing theology, myth, and sacred imagination across popular media.</p>
      </section>

      <section aria-labelledby="featured-heading">
        <div class="section-heading">
          <h2 id="featured-heading">Featured</h2>
        </div>
        <article class="section-card">
          <div class="book-hero" id="book-hero">
            <img class="book-cover" src="./assets/images/books/pkd.jpg" alt="Cover of The Esoteric Theology of Philip K. Dick" loading="lazy" />
            <div class="book-copy">
              <div><span class="status-pill">Forthcoming</span></div>
              <h3>The Esoteric Theology of Philip K. Dick</h3>
              <p class="muted">Edited scholarly volume (Bloomsbury, 2025) examining Philip K. Dick’s theological imagination across literature and adaptation.</p>
              <div class="cta-row">
                <a class="btn" href="https://amzn.to/46Fn12N" target="_blank" rel="noopener">Preorder</a>
                <a class="btn ghost" href="./books.html#pkd-theology">Publication details</a>
              </div>
            </div>
          </div>
          <button type="button" class="btn ghost" id="book-toggle" aria-expanded="false" aria-controls="book-extras" style="margin-top: 1.5rem; display: none;">Read more</button>
          <div id="book-extras" class="detail-grid" style="margin-top: 2rem; display: none;">
            <div class="book-copy" id="book-desc"></div>
            <div class="detail-grid" id="book-blurbs"></div>
          </div>
        </article>
      </section>

      <section id="more-books" style="display: none; margin-top: 3rem;">
        <div class="section-heading">
          <h2>More titles</h2>
        </div>
        <div class="grid cols-3" id="books-grid"></div>
      </section>
    </main>

    <footer>
      <p class="footer-tagline">Religion · Media · Imagination</p>
      <nav class="footer-links" aria-label="Secondary">
        <a href="./assets/docs/michael-c-barros-cv.pdf" target="_blank" rel="noopener">CV (PDF)</a>
        <a href="https://mythonoesis.substack.com/" target="_blank" rel="noopener">Substack</a>
        <a href="https://github.com/michaelcbarros" target="_blank" rel="noopener">GitHub</a>
        <a href="https://orcid.org/" target="_blank" rel="noopener">ORCID</a>
        <a href="https://independent.academia.edu/MichaelBarros" target="_blank" rel="noopener">Academia.edu</a>
      </nav>
      © <span id="year"></span> Michael C. Barros
    </footer>
  </div>

  <script>
    window.addEventListener('DOMContentLoaded', () => {
      const year = document.getElementById('year');
      if (year) year.textContent = new Date().getFullYear();

      const books = (window.SITE_DATA && window.SITE_DATA.books) || [];
      if (!books.length) return;

      const featured = books.find(b => b.featured) || books[0];
      const hero = document.getElementById('book-hero');
      if (!hero) return;
      const FALLBACK_COVER =
        'data:image/svg+xml;charset=UTF-8,' +
        encodeURIComponent(`
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 600">
            <rect width="400" height="600" fill="#11152a" />
            <rect x="40" y="48" width="320" height="504" rx="24" fill="none" stroke="#6257a5" stroke-width="2" />
            <path d="M80 160h240M80 300h240M80 440h240" stroke="#3f4668" stroke-width="1" />
            <text x="50%" y="52%" text-anchor="middle" dominant-baseline="middle" font-family="Playfair Display, serif" font-size="48" fill="#d1b97a" letter-spacing="4">Myth</text>
          </svg>
        `);
      const cover = featured.cover || featured.image || FALLBACK_COVER;
      const status = featured.status ? `<span class="status-pill">${featured.status}</span>` : '';
      const buy = (featured.buy_links && featured.buy_links[0]) ? featured.buy_links[0] : null;

      hero.innerHTML = `
        <img class="book-cover" src="${cover}" alt="${featured.title} cover" loading="lazy" />
        <div class="book-copy">
          <div>${status}</div>
          <h3>${featured.title}</h3>
          ${featured.summary ? `<p class="muted">${featured.summary}</p>` : ''}
          <div class="cta-row">
            ${buy ? `<a class="btn" href="${buy.url}" target="_blank" rel="noopener">${buy.label || 'Preorder'}</a>` : ''}
            ${featured.url ? `<a class="btn ghost" href="${featured.url}">Publication details</a>` : ''}
          </div>
        </div>
      `;

      const extras = document.getElementById('book-extras');
      const toggleBtn = document.getElementById('book-toggle');
      const descEl = document.getElementById('book-desc');
      const blurbsEl = document.getElementById('book-blurbs');

      const paragraphs = (featured.description || '')
        .split(/\n{2,}/)
        .map(s => s.trim())
        .filter(Boolean);

      if (paragraphs.length && descEl) {
        descEl.innerHTML = paragraphs.map(p => `<p>${p}</p>`).join('');
      }

      const reviews = featured.reviews || [];
      if (reviews.length && blurbsEl) {
        blurbsEl.innerHTML = reviews.slice(0, 2).map(r => `
          <div class="blurb">
            <blockquote>“${(r.quote || '').replace(/^"|”$/g, '')}”</blockquote>
            <small class="muted">— ${r.source || 'Reviewer'}</small>
          </div>
        `).join('');
      }

      const hasExtras = (paragraphs.length || reviews.length) > 0;

      if (hasExtras && toggleBtn && extras) {
        const setExpanded = (expanded) => {
          extras.style.display = expanded ? 'grid' : 'none';
          toggleBtn.textContent = expanded ? 'Read less' : 'Read more';
          toggleBtn.setAttribute('aria-expanded', expanded ? 'true' : 'false');
          extras.setAttribute('aria-hidden', expanded ? 'false' : 'true');
        };

        toggleBtn.style.display = 'inline-flex';
        setExpanded(false);

        toggleBtn.addEventListener('click', () => {
          const isExpanded = toggleBtn.getAttribute('aria-expanded') === 'true';
          setExpanded(!isExpanded);
        });
      } else if (toggleBtn) {
        toggleBtn.style.display = 'none';
      }

      const others = books.filter(b => b !== featured);
      if (others.length) {
        const wrap = document.getElementById('more-books');
        const grid = document.getElementById('books-grid');
        if (wrap && grid) {
          grid.innerHTML = others.map(b => `
            <article class="card">
              <div class="feature-copy">
                ${b.cover ? `<img src="${b.cover}" alt="" style="width: 120px; border-radius: var(--radius-sm); margin-bottom: 1rem;">` : ''}
                <div class="meta-row">
                  <span class="status-pill">${b.status || 'Book'}</span>
                </div>
                <h3>${b.title}</h3>
                ${b.summary ? `<p class="muted">${b.summary}</p>` : ''}
                ${(b.buy_links && b.buy_links[0]) ? `<a class="btn ghost" style="margin-top: 0.6rem;" href="${b.buy_links[0].url}" target="_blank" rel="noopener">${b.buy_links[0].label || 'Preorder'}</a>` : ''}
              </div>
            </article>
          `).join('');
          wrap.style.display = 'block';
        }
      }
    });
  </script>
  <script defer src="./js/nav.js"></script>
</body>
</html>
